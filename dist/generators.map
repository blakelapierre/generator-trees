{"version":3,"file":"dist/generators.js","sources":["src/generators.js","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/3"],"names":[],"mappings":"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","sourceRoot":"dist/","sourcesContent":["let TERMINAL = Symbol();\n\nexport {\n  transform,\n  transform as map,\n  each,\n  modifiableStack,\n  modifiableQueue,\n  modifiableStackAlt,\n  modifiableQueueAlt,\n  toGenerator,\n  toArray,\n  loop,\n  interleave,\n  repeat,\n  repeatG,\n  integers,\n  take,\n  zip,\n  TERMINAL\n};\n\nfunction* loop(g) {\n  var q = [],\n      next = 0;\n\n  var result;\n  while(true) {\n    var result = g.next();\n    if (!result.done) {\n      q.push(result.value);\n      yield result.value;\n    }\n    else break;\n  }\n\n  while (true) {\n    var result = g.next();\n    if (!result.done) {\n      q.push(result.value);\n      yield result.value;\n    }\n    else {\n      var value = q[next];\n      yield value;\n      next = (next + 1) % q.length;\n    }\n  }\n}\n\n\n// Interleave the results of a series of generators\n//\n// `generators`: a generator that produces the generators to interleave\nfunction* interleave(generators) {\n  var q = toArray(generators),\n      next = 0;\n\n  while (q.length > 0) {\n    next = next % q.length;\n    var generator = q[next],\n        result = generator.next();\n\n    if (result.done) {\n      remove(generator);\n      if (q.length == 0) return result.value;\n    }\n\n    next = next + 1;\n\n    yield result.value;\n  }\n\n  function remove(obj) {\n    var index = q.indexOf(obj);\n    if (index != -1) {\n      q.splice(index, 1);\n      if (next >= index) {\n        next = next == 0 ? q.length - 1 : next - 1;\n      }\n    }\n    else throw Error('Tried to remove object that is not in q', obj, q);\n  }\n}\n\n\nfunction* threadValue(generators, value) {\n  while (true) {\n    var result = generators.next(value),\n        generator = result.value;\n\n  }\n}\n\nfunction mapGenerator(g, fn) {\n  var mapped = [];\n  while (true) {\n    var result = g.next();\n    mapped.push(fn(result.value));\n    if (result.done) return mapped;\n  }\n}\n\nfunction each(g, fn) {\n  while (true) {\n    var result = g.next();\n    fn(result.value);\n    if (result.done) return;\n  }\n}\n\nfunction* transform(generator, fn) {\n  while (true) {\n    var {value, done} = generator.next();\n\n    if (done) return value == TERMINAL ? TERMINAL : fn(value); // Do we want to embed this terminal logic here?\n    else yield fn(value);\n  }\n}\n\nfunction* take(generator, count) {\n  while (true) {\n    var result = generator.next();\n    if (result.done || --count <= 0) return result.value;\n    yield result.value;\n  }\n}\n\n//Shouldn't we be yielding generators?\nfunction* zip(generators) {\n  var array = toArray(generators);\n\n  var remaining = array.length;\n  while (remaining > 0) {\n    var product = [];\n    for (var i = 0; i < array.length; i++) {\n      var generator = array[i],\n          result = generator != null ? generator.next() : undefined;\n\n      if (result) {\n        product.push(result.value);\n        if (result.done) {\n          delete array[i];\n          remaining--;\n        }\n      }\n      else product.push(undefined);\n    }\n\n    if (remaining == 0) return product;\n    yield product;\n  }\n}\n\n// There are multiple ways to implement this function...\nfunction* repeatG(generator, count) {\n  var values = [];\n\n  yield function* () {\n    while(true) {\n      var result = generator.next();\n      console.log('got result', result);\n      values.push(result.value);\n\n      if (result.done) return result.value;\n      else yield result.value;\n    }\n  };\n\n  for (var i = 0; i < count - 1; i++) {\n    yield function* () {\n      for (var v = 0; v < values.length - 1; v++) yield values[v];\n      return values[v];\n    };\n  }\n}\n\nfunction* repeat(item, count) {\n  if (count == 0) throw new Error('why did you do that?');\n\n  for (var i = 0; i < count - 1; i++) yield item;\n  return item;\n}\n\nfunction toArray(generator) {\n  var array = [];\n\n  while (true) {\n    let {value, done} = generator.next();\n    if (value != TERMINAL) array.push(value);\n    if (done) return array;\n  }\n}\n\nfunction* toGenerator(array) {\n  var length = array.length;\n\n  if (length == 0) throw Error('What should we do here?');\n\n  var i = 0;\n  for (i; i < length - 1; i++) yield array[i];\n  return array[i];\n}\n\n// if the stack is modified after popping the last element, the remaining\n// stack won't be generated...\nfunction* modifiableStack(stack) {\n  if (stack.length == 0) throw Error('Empty stack', stack);\n\n  while (stack.length > 1) yield stack.pop();\n  return stack.pop();\n}\n\n// if the queue is modified after popping the last element, the remaining\n// queue won't be generated...\nfunction* modifiableQueue(queue) {\n  if (queue.length == 0) throw Error('Empty queue', queue);\n\n  while (queue.length > 1) yield queue.shift();\n  return queue.shift();\n}\n\nfunction* modifiableStackAlt(stack) {\n  if (stack.length == 0) throw Error('Empty stack', stack);\n\n  do { yield stack.pop(); } while (stack.length > 0);\n\n  return TERMINAL;\n}\n\nfunction* modifiableQueueAlt(queue) {\n  if (queue.length == 0) throw Error('Empty queue', queue);\n\n  do { yield queue.shift(); } while (queue.length > 0);\n\n  return TERMINAL;\n}\n\nfunction* integers(start, end) {\n  if (end != undefined) {\n    var i = start || 0;\n    while (i < end) yield i++;\n    return i;\n  }\n\n  var i = start || 0;\n  while (true) yield i++;\n}","Object.defineProperties(exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;"]}