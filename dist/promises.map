{"version":3,"file":"dist/promises.js","sources":["src/promises.js","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/3"],"names":[],"mappings":"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","sourceRoot":"dist/","sourcesContent":["export {sync, pipe, async};\n\nfunction sync(generator, notify, notifyError) {\n  return new Promise((resolve, reject) => {\n    let count = 0;\n    process(generator);\n\n    function process(generator) {\n      let {value, done} = generator.next();\n\n      value\n        .then(\n          result => {\n            count++;\n            notify(result, count);\n            if (done) resolve(count);\n            else process(generator);\n          },\n          notifyError ? error : reject);\n\n      function error(error) {\n        count++;\n        notifyError(error);\n        if (done) resolve(count);\n        else process(generator);\n      }\n    }\n  });\n}\n\nfunction pipe(generator, notify, notifyError) {\n  return new Promise((resolve, reject) => {\n    process(generator);\n\n    function process(generator) {\n      let {value, done} = generator.next();\n\n      value\n        .then(\n          next,\n          error);\n          //notifyError ? error : reject);\n\n      function next(result, done) {\n        notify(result);\n        if (done) resolve(result);\n        else process(generator);\n      }\n\n      function error(error) {\n        if (!notifyError) reject(error);\n        else {\n          notifyError(error);\n          if (done) resolve(count);\n          else process(generator);\n        }\n      }\n    }\n  });\n}\n\nfunction async(maxConcurrent, generator, notify, notifyError) {\n  return new Promise((resolve, reject) => {\n    let count = 0,\n        running = 0,\n        finished = false;\n\n    process(generator);\n\n    function process(generator) {\n      running++;\n      count++;\n\n      let {value, done} = generator.next();\n\n      finished = done;\n\n      value\n        .then(\n          result => {\n            running--;\n            notify(result, count);\n            if (!finished) process(generator);\n            else if (running == 0) resolve(count);\n          },\n          notifyError ? error : reject);\n\n      if (running < maxConcurrent) process(generator);\n    }\n\n    function error(error) {\n      running--;\n      count++;\n      notifyError(error);\n      if (!finished) process(generator);\n      else if (running == 0) resolve(count);\n    }\n  });\n}","Object.defineProperties(exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;"]}